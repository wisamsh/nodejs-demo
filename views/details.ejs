<!DOCTYPE html>
<html>
<%- include('./partials/head.ejs');%>
<%- include('./partials/nav.ejs');%>

<body>
<div class="container-fluid">
   
        <div class="card d-lg-inline-flex m-2 p-1" style="max-width: 300px;">
          <div class="card-body">
            <h2 class="card-title"><%= blog.title %></h2>
            <h4 class="card-subtitle mb-2 text-muted"><%= blog.snippet %></h4>
            <p class="card-text"><%= blog.body %></p>
            
          </div>
          <a class="delete" data-doc="<%= blog._id %>">Delete</a>
        </div>
        
</div>
<!-- <%- include('./partials/footer.ejs');%> -->
<script>
  const trashcan = document.querySelector('a.delete');
  trashcan.addEventListener('click', (e)=>{
    const endpoint = `/all-blogs/${trashcan.dataset.doc}` ; 
fetch( endpoint , {
  method : 'DELETE'
})
.then((response) => response.json())
.then((data) => (window.location.href = data.redirect))
.catch((err) => (console.log(err) ))

  })
</script>


</body>